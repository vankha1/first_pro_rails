<%= form_with(model: @photo, class: "row", style: "width: 100%") do |form| %>
    <div class="col-6">
        <%= form.label :title %><br/>
        <%= form.text_field :title, placeholder: "Photo Title", style: "width: 90%; margin-bottom: 1.5rem" %>

        <%= form.label :sharing_mode %><br/>
        <%= form.select :is_private, ['Public', 'Private'] %>
    </div>

    <div class="col-6">
        <%= form.label :description %><br/>
        <%= form.text_area :description, placeholder: "Photo Description", size: "50x5", style: "width: 90%; margin-bottom: 1.5rem" %>
    </div>

    <div class="d-flex flex-wrap" style="gap: 1.5rem">
        <div
            class="card bg-dark text-white border-0 p-0 mt-4 mb-5"
            style="max-width: 200px; height: 200px"
        >
            <img
                class="card-img"
                style="width: 100%; height: 100%; object-fit: cover"
                id= "thumbnail-img"
            />
            <div class="card-img-overlay float-start">
                <i
                    class="fa-solid fa-xmark"
                    style="
                        float: right;
                        font-size: 1.5rem;
                        color: #4f4f4f;
                        cursor: pointer;
                        -webkit-text-stroke: 3px #4f4f4f;
                    "
                ></i>
            </div>
        </div>

        <label
            class="card text-white border-1 p-0 mt-4 mb-5 d-flex justify-content-center align-items-center"
            style="
                width: 200px;
                height: 200px;
                background-color: #f2f2f2;
                border-style: dashed;
                cursor: pointer;
            "
            for="files_inputs"
        >
            <i
                class="fa-solid fa-plus"
                style="
                    font-size: 4rem;
                    -webkit-text-stroke: 5px #bdbdbd;
                    color: #bdbdbd;
                "
            ></i>
        </label>
        <%= form.file_field(:image_url, class: "d-none", id: "files_inputs") %>
    </div>

    <div>
        <%= form.submit "Save", class: "btn btn-success", style: "margin-right: 3rem" %>
    </div>
<% end %>

<script>

    $(document).on('ready', function() {
        console.log("Check here")
        handle_preview($("#files_inputs"), $("#thumbnail-img"));
    });

    function readURL(input, image) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
                reader.onload = function(e) {
                image.attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }

    function handle_preview(input_tag, image){
        input_tag.change(function(e){
            var file = e.target.files[0];
            readURL(e.target, image);
        });
    }

</script>